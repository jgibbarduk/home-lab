---
# - name: Verify cgroup flags are enabled
#   lineinfile:
#     path: /boot/cmdline.txt
#     backrefs: yes
#     state: present
#     regexp: '^(.*) {{item}}(.*)$'
#     backup: yes
#     line: '\g<1> {{item}}\g<2>'
#   with_items:
#     - 'cgroup_enable=cpuset'
#     - 'cgroup_enable=memory'
#     - 'cgroup_memory=1'
#   register: cgroup_flags
#   when: "ansible_lsb.id == 'Raspbian' and ansible_kernel is version('4.6', '>=')"
#   changed_when: cgroup_flags.rc is defined and cgroup_flags.rc != 0
#   notify: Reboot

- name: Install a python & pip
  apt:
    pkg:
    - python3
    - python3-pip

- name: Install bpytop
  command: "pip3 install bpytop"

- name: Install a common utils
  apt:
    pkg:
    - zsh
    - curl
    - wget
    - vim
    - net-tools
    - jq
    - nfs-common

- import_tasks: docker.yml

# - name: Download NetData Script
#   get_url:
#     url: https://my-netdata.io/kickstart.sh 
#     dest: /tmp/netdata-kickstart.sh 
#     mode: +x

# - name: Install NetData Client
#   command: /tmp/netdata-kickstart.sh --stable-channel --disable-telemetry    